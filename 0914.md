## 扫描显示

在每次触发中断时，对中断数量进行累加计数。计数值模4后作为显示的扫描序号，选通对应数码管，并将显示数据寄存器中对应字节的值送入相应的数码管。在扫描序号完成一次循环时，数码管0-3也会完成一次扫描，称为一帧。在这一帧中，四位数码管将按顺序依次显示4byte显示信号寄存器中的数据。

在缓冲显示模式下，每一组画面将显示预定的时间（帧数），因此还需要帧重复计数器、帧索引号和显示数据缓冲区。帧重复计数器用于记录画面重复显示的次数，帧索引号用于从显示数据缓冲区中读取正确的数据，显示数据缓冲区用于缓存之后需要使用的显示数据。
完成一帧的扫描显示后，帧重复数计数器累加。在帧重复计数器达到预定值之前，都将重复显示这一帧的内容，因此不会显示数据寄存器不会修改。在达到预设值后，就需要修改显示信号寄存器中的内容，以显示更新后的内容。显示信号寄存器将根据对应的索引号，从显示数据缓冲区中读取4byte的数据。随后将更改显示索引号（循环显示模式），或者将显示数据缓冲区中被读取出的数据推出。
在实时更新模式下，帧重复计数器、帧索引号和显示数据缓冲区将被停止使用。数码管将直接显示显示数据寄存器中的数据，在改写显示内容时，也将直接改写显示数据寄存器。

如果不改变4byte显示信号寄存器中的数据，那么数码管将循环显示同样的内容。

# 循环显示

在完成一帧信号的扫描显示后，帧重复计数器++。

重复内容显示的操作，直到帧重复计数器达到预设值。这一帧的内容完成显示，帧序号计数器递增循环计数。

为了改变显示内容，需要提取出下一组待显示的信号，用于下一个显示周期。此时根据帧序号计数器和其他显示参数，从显示数据缓存中取出对应位置的4byte数据，载入显示信号寄存器。在下一个周期中将显示新的内容。

通过改写存储循环显示内容的内存和帧序号计数器，可以实现对循环显示内容的修改。

## 版本

v1
循环显示固定内容：向数码管输出信号时从存储显示内容的数组中循环读取数据
                问题 输出信号无法更改

v2
加入4byte的显示信号寄存器，向数码管输出信号时从 显示信号寄存器中读取数据；通过改写显示信号寄存器实现对输出内容的更改
                问题：改写时间难以确定。如果直接改写则会打断原有信号的正常输出；如果在每一组数据写完后改写，则只能使用轮询的方法，效率不足

v3
保证改写时间：加入显示数据缓存，显示信号寄存器从显示数据缓存中读取数据。在需要更改输出信号时，直接修改显示数据缓存和帧序号计数器。在下一个显示周期中，就会显示修改过的信号。